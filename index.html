<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SD Negeri 2 Purbasari</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .menu-icon {
            transition: all 0.3s ease;
            transform: scale(1);
        }
        .menu-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .menu-icon:active {
            transform: scale(0.95);
        }
        .bg-app {
            background-image: url('https://i.imgur.com/F71J380.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .bg-overlay {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(2px);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
}
        .teacher-photo {
            width: 120px;
            height: 120px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 4px solid white;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        .teacher-photo:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .teacher-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 20px;
        }
        .teacher-name {
            margin-top: 12px;
            font-weight: 600;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-size: 16px;
        }
        .teacher-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: scale(0);
            transition: all 0.3s ease;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 1000;
            width: 90%;
            max-width: 400px;
        }
        .teacher-card.show {
            transform: translate(-50%, -50%) scale(1);
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .app-icon {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .app-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        .app-icon:active {
            transform: scale(0.95);
        }

        .gradient-text {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 3s ease infinite;
        }

        .gradient-text-2 {
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c, #4facfe);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 4s ease infinite;
        }

        .gradient-text-3 {
            background: linear-gradient(45deg, #ffecd2, #fcb69f, #a8edea, #fed6e3, #d299c2);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 5s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .colorful-text {
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .rainbow-text {
            background: linear-gradient(to right, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }


    </style>
</head>
<body class="bg-app min-h-screen">
    <div class="bg-overlay min-h-screen">
        <!-- Header -->
        <header class="text-white py-6 px-4">
            <div class="max-w-6xl mx-auto text-center">
                <div class="flex items-center justify-center mb-4">
                    <div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-pink-500 rounded-full flex items-center justify-center mr-4 shadow-lg">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold gradient-text drop-shadow-lg">ğŸ« SD Negeri 2 Purbasari âœ¨</h1>
                        <p class="text-yellow-200 font-bold drop-shadow text-lg">ğŸŒŸ Membentuk Generasi Cerdas dan Berkarakter ğŸŒŸ</p>
                    </div>
                </div>
                <div id="connection-status" class="text-sm bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-full px-4 py-2 inline-block shadow-lg font-semibold">
                    <span id="status-text">ğŸ”„ Menghubungkan ke database...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-6xl mx-auto px-4 py-8">
            <!-- App Icons Grid (Mobile Style) -->
            <div id="menu-grid" class="grid grid-cols-4 gap-8 mb-12 justify-items-center">
                <!-- Profil Sekolah -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-blue-400 to-blue-600" onclick="showSection('profil')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                        </svg>
                    </div>
                    <p class="text-yellow-300 text-xs mt-2 font-bold drop-shadow">ğŸ›ï¸ Profil</p>
                </div>

                <!-- Guru & Karyawan -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-green-400 to-green-600" onclick="showSection('guru')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/>
                        </svg>
                    </div>
                    <p class="text-green-300 text-xs mt-2 font-bold drop-shadow">ğŸ‘©â€ğŸ« Guru</p>
                </div>

                <!-- Visi Misi -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-purple-400 to-purple-600 opacity 50%" onclick="showSection('visi-misi')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                            <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <p class="text-purple-300 text-xs mt-2 font-bold drop-shadow">ğŸ‘ï¸ Visi Misi</p>
                </div>

                <!-- Postingan -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-blue-400 to-blue-600" onclick="showSection('postingan')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z" clip-rule="evenodd"/>
                            <path d="M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V9a1 1 0 00-1-1h-1v-1z"/>
                        </svg>
                    </div>
                    <p class="text-blue-300 text-xs mt-2 font-bold drop-shadow">ğŸ“° Postingan</p>
                </div>

                <!-- Tugas -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-orange-400 to-orange-600" onclick="showSection('tugas')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 002 2h4a2 2 0 002-2V3a2 2 0 012 2v6h-3a3 3 0 00-3 3v3H6a2 2 0 01-2-2V5zm8 8a1 1 0 00-1 1v3a1 1 0 002 0v-1l.5-.5a1 1 0 00-.5-1.5z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <p class="text-orange-300 text-xs mt-2 font-bold drop-shadow">ğŸ“ Tugas</p>
                </div>

                <!-- Ekstrakurikuler -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-red-400 to-red-600" onclick="showSection('ekstrakurikuler')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                    </div>
                    <p class="text-red-300 text-xs mt-2 font-bold drop-shadow">â­ Ekstra</p>
                </div>

                <!-- Pendaftaran -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-indigo-400 to-indigo-600" onclick="showSection('pendaftaran')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <p class="text-indigo-300 text-xs mt-2 font-bold drop-shadow">ğŸ“‹ Daftar</p>
                </div>

                <!-- Gallery -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-pink-400 to-pink-600" onclick="showSection('gallery')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <p class="text-pink-300 text-xs mt-2 font-bold drop-shadow">ğŸ–¼ï¸ Gallery</p>
                </div>

                <!-- Kontak -->
                <div class="text-center">
                    <div class="app-icon bg-gradient-to-br from-teal-400 to-teal-600" onclick="showSection('kontak')">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                        </svg>
                    </div>
                    <p class="text-teal-300 text-xs mt-2 font-bold drop-shadow">ğŸ“ Kontak</p>
                </div>
            </div>

            <!-- Content Sections -->
            <div id="content-area" class="bg-white/20 backdrop-blur-sm rounded-2xl shadow-lg p-8">
                <!-- Welcome Section -->
                <div id="welcome" class="text-center">
                    <h2 class="text-4xl font-bold gradient-text-2 mb-4 drop-shadow-lg">ğŸ‰ Selamat Datang di SD Negeri 2 Purbasari ğŸ‰</h2>
                    <p class="text-yellow-200 font-bold mb-6 drop-shadow text-lg">âœ¨ Sekolah yang berkomitmen untuk membentuk generasi cerdas, kreatif, dan berkarakter mulia âœ¨</p>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="card-hover bg-gradient-to-br from-blue-500/30 to-purple-500/30 backdrop-blur-sm p-6 rounded-xl border-2 border-blue-300/50">
                            <h3 class="font-bold text-yellow-300 mb-2 drop-shadow-lg text-xl">ğŸ¯ Visi</h3>
                            <p class="text-blue-100 text-sm drop-shadow font-medium">Menjadi sekolah unggulan yang menghasilkan siswa berprestasi dan berkarakter</p>
                        </div>
                        <div class="card-hover bg-gradient-to-br from-green-500/30 to-teal-500/30 backdrop-blur-sm p-6 rounded-xl border-2 border-green-300/50">
                            <h3 class="font-bold text-yellow-300 mb-2 drop-shadow-lg text-xl">ğŸš€ Misi</h3>
                            <p class="text-green-100 text-sm drop-shadow font-medium">Memberikan pendidikan berkualitas dengan pendekatan holistik</p>
                        </div>
                        <div class="card-hover bg-gradient-to-br from-purple-500/30 to-pink-500/30 backdrop-blur-sm p-6 rounded-xl border-2 border-purple-300/50">
                            <h3 class="font-bold text-yellow-300 mb-2 drop-shadow-lg text-xl">ğŸ’ Nilai</h3>
                            <p class="text-purple-100 text-sm drop-shadow font-medium">Integritas, Kreativitas, dan Keunggulan dalam setiap aspek</p>
                        </div>
                    </div>
                </div>

                <!-- Profil Section -->
                <div id="profil" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text drop-shadow-lg">ğŸ›ï¸ Profil Sekolah</h2>
                    </div>
                    <div id="kepala-sekolah-content">
                        <p class="text-yellow-300 font-semibold">ğŸ”„ Memuat data kepala sekolah...</p>
                    </div>
                </div>

                <!-- Visi Misi Section -->
                <div id="visi-misi" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text-2 drop-shadow-lg">ğŸ‘ï¸ Visi & Misi</h2>
                    </div>

                    <div class="space-y-8">
                        <!-- Visi -->
                        <div class="card-hover bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl p-8 text-white border-4 border-yellow-300">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <h3 class="text-4xl font-bold rainbow-text">ğŸ¯ VISI</h3>
                            </div>
                            <div class="bg-gradient-to-r from-white/20 to-yellow-200/20 backdrop-blur-sm rounded-lg p-6 border-2 border-yellow-300">
                                <p class="text-xl leading-relaxed text-center font-bold text-yellow-100">
                                    "âœ¨ Terwujudnya Murid yang berakhlak mulia, religius, mandiri, berprestasi, berwawasan global, berjiwa Pancasila dan berkarakter sesuai dimensi profil lulusan âœ¨"
                                </p>
                            </div>
                        </div>

                        <!-- Misi -->
                        <div class="card-hover bg-white/20 backdrop-blur-sm rounded-xl p-8 shadow-lg border-4 border-pink-300">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <h3 class="text-4xl font-bold gradient-text-3 drop-shadow-lg">ğŸš€ MISI</h3>
                            </div>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="bg-gradient-to-br from-purple-400/40 to-pink-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-purple-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">1</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ“š Menyelenggarakan pembelajaran berkesadaran</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-blue-400/40 to-teal-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-blue-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">2</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ’¡ Menciptakan pembelajaran bermakna</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-green-400/40 to-emerald-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-green-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">3</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ˜Š Memastikan pembelajaran yang menyenangkan</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-red-400/40 to-pink-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-red-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">4</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸŒŸ Mengembangkan delapan dimensi profil lulusan</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-indigo-400/40 to-purple-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-indigo-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">5</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ—ï¸ Membangun ekosistem pembelajaran</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-teal-400/40 to-cyan-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-teal-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">6</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ›ï¸ Melestarikan nilai-nilai budaya lokal</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-orange-400/40 to-red-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-orange-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">7</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ’» Mengintegrasikan pembelajaran Koding dan Kecerdasan Artifisial (KKA)</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-pink-400/40 to-rose-400/40 backdrop-blur-sm rounded-lg p-4 border-2 border-pink-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">8</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ“± Melaksanakan Pembelajaran Berbasis Digital untuk mendukung program pembelajaran mendalam</p>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-br from-violet-400/40 to-purple-400/40 backdrop-blur-sm rounded-lg p-4 md:col-span-2 border-2 border-violet-300">
                                    <div class="flex items-start gap-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-1">9</div>
                                        <p class="text-yellow-200 font-bold drop-shadow">ğŸ¯ Melaksanakan kegiatan Kokurikuler sebagai penguat intrakurikuler</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Guru Section -->
                <div id="guru" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text-3 drop-shadow-lg">ğŸ‘©â€ğŸ« Guru & Karyawan</h2>
                    </div>
                    <div id="guru-photos" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 justify-items-center">
                        <p class="text-yellow-300 font-semibold col-span-full">ğŸ”„ Memuat foto guru dan karyawan...</p>
                    </div>
                </div>

                <!-- Postingan Section -->
                <div id="postingan" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text drop-shadow-lg">ğŸ“° Postingan Sekolah</h2>
                    </div>
                    <div id="postingan-list" class="space-y-6">
                        <p class="text-yellow-300 font-semibold">ğŸ”„ Memuat postingan...</p>
                    </div>
                </div>

                <!-- Tugas Section -->
                <div id="tugas" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text-2 drop-shadow-lg">ğŸ“ Tugas Siswa</h2>
                    </div>

                    <!-- Filter Kelas -->
                    <div class="mb-6">
                        <div class="flex flex-wrap gap-2">
                            <button onclick="filterTugas('all')" class="filter-btn bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg text-sm transition-colors font-bold">
                                ğŸŒŸ Semua Kelas
                            </button>
                            <button onclick="filterTugas('1')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold">
                                1ï¸âƒ£ Kelas 1
                            </button>
                            <button onclick="filterTugas('2')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold">
                                2ï¸âƒ£ Kelas 2
                            </button>
                            <button onclick="filterTugas('3')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold">
                                3ï¸âƒ£ Kelas 3
                            </button>
                            <button onclick="filterTugas('4')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold">
                                4ï¸âƒ£ Kelas 4
                            </button>
                            <button onclick="filterTugas('5')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold">
                                5ï¸âƒ£ Kelas 5
                            </button>
                            <button onclick="filterTugas('6')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold">
                                6ï¸âƒ£ Kelas 6
                            </button>
                        </div>
                    </div>

                    <div id="tugas-list" class="space-y-6">
                        <p class="text-yellow-300 font-semibold">ğŸ”„ Memuat daftar tugas...</p>
                    </div>
                </div>

                <!-- Ekstrakurikuler Section -->
                <div id="ekstrakurikuler" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold rainbow-text drop-shadow-lg">â­ Ekstrakurikuler</h2>
                    </div>

                    <div class="bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl p-6 text-white mb-8 border-4 border-purple-300">
                        <h3 class="text-3xl font-bold mb-2">ğŸŒŸ Kegiatan Ekstrakurikuler</h3>
                        <p class="text-purple-100 font-semibold text-lg">âœ¨ Berbagai kegiatan untuk mengembangkan bakat dan minat siswa âœ¨</p>
                    </div>

                    <div id="ekstrakurikuler-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <p class="text-yellow-300 font-semibold col-span-full">ğŸ”„ Memuat daftar ekstrakurikuler...</p>
                    </div>
                </div>

                <!-- Pendaftaran Section -->
                <div id="pendaftaran" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text-3 drop-shadow-lg">ğŸ“‹ Pendaftaran Siswa Baru</h2>
                    </div>

                    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white mb-8 border-4 border-indigo-300">
                        <h3 class="text-3xl font-bold mb-2">ğŸ“ Pendaftaran Siswa Baru</h3>
                        <p class="text-indigo-100 font-semibold text-lg">âœ¨ Tahun Ajaran 2025/2026 - Daftar sekarang untuk masa depan yang cerah! âœ¨</p>
                    </div>

                    <div class="bg-white/20 backdrop-blur-sm rounded-xl p-8 shadow-lg border-4 border-indigo-300">
                        <form id="pendaftaran-form" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">ğŸ‘¤ Nama Lengkap</label>
                                    <input type="text" id="nama" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">ğŸ  Tempat Lahir</label>
                                    <input type="text" id="tempat-lahir" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold">
                                </div>
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">ğŸ“… Tanggal Lahir</label>
                                    <input type="date" id="tanggal-lahir" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">âš§ï¸ Jenis Kelamin</label>
                                    <select id="jenis-kelamin" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold">
                                        <option value="">Pilih Jenis Kelamin</option>
                                        <option value="Laki-laki">ğŸ‘¦ Laki-laki</option>
                                        <option value="Perempuan">ğŸ‘§ Perempuan</option>
                                    </select>
                                </div>
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Nama Orang Tua/Wali</label>
                                    <input type="text" id="orang-tua" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">ğŸ“ No. Telepon</label>
                                    <input type="tel" id="telepon" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-yellow-300 mb-2 drop-shadow">ğŸ¡ Alamat Lengkap</label>
                                <textarea id="alamat" rows="3" required class="w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-semibold"></textarea>
                            </div>

                            <button type="submit" class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white py-3 px-6 rounded-lg font-bold transition-colors text-lg">
                                ğŸ‰ Daftar Sekarang ğŸ‰
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Gallery Section -->
                <div id="gallery" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold rainbow-text drop-shadow-lg">ğŸ–¼ï¸ Gallery Sekolah</h2>
                    </div>
                    <div class="text-center py-12">
                        <svg class="w-16 h-16 text-pink-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                        </svg>
                        <p class="text-pink-300 font-bold text-lg">ğŸ¨ Gallery foto kegiatan sekolah akan segera hadir ğŸ¨</p>
                    </div>
                </div>

                <!-- Kontak Section -->
                <div id="kontak" class="hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showHome()" class="flex items-center gap-2 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white px-4 py-2 rounded-lg transition-colors mr-4 font-bold">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                            </svg>
                            ğŸ  Kembali
                        </button>
                        <h2 class="text-2xl font-bold gradient-text drop-shadow-lg">ğŸ“ Kontak Kami</h2>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-gradient-to-br from-teal-500/30 to-cyan-500/30 backdrop-blur-sm p-6 rounded-xl border-4 border-teal-300">
                            <h3 class="font-bold text-yellow-300 mb-4 drop-shadow-lg text-xl">ğŸ“‹ Informasi Kontak</h3>
                            <div class="space-y-3">
                                <p class="flex items-center gap-2 text-teal-100 font-semibold drop-shadow">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                                    </svg>
                                    ğŸ“ Jl. Desa Purbasari Sirandu, Kecamatan Karangjambu Kab Purbalingga
                                </p>
                                <p class="flex items-center gap-2 text-teal-100 font-semibold drop-shadow">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                                    </svg>
                                    ğŸ“ (0267) 123-4567
                                </p>
                                <p class="flex items-center gap-2 text-teal-100 font-semibold drop-shadow">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                    </svg>
                                    ğŸ“§ info@sdn2purbasari.sch.id
                                </p>
                            </div>
                        </div>
                        <div class="bg-gradient-to-br from-white/30 to-blue-200/30 backdrop-blur-sm p-6 rounded-xl shadow-lg border-4 border-blue-300">
                            <h3 class="font-bold text-yellow-300 mb-4 drop-shadow-lg text-xl">â° Jam Operasional</h3>
                            <div class="space-y-2 text-blue-100 font-semibold drop-shadow">
                                <p>ğŸ“… Senin - Jumat: 07:00 - 15:00</p>
                                <p>ğŸ“… Sabtu: 07:00 - 12:00</p>
                                <p>ğŸš« Minggu: Tutup</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Teacher Card Modal -->
        <div id="teacher-overlay" class="overlay" onclick="closeTeacherCard()"></div>
        <div id="teacher-card" class="teacher-card">
            <div class="flex justify-between items-start mb-4">
                <h3 class="text-xl font-bold">Data Guru</h3>
                <button onclick="closeTeacherCard()" class="text-white hover:text-gray-300">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
            <div class="flex items-start gap-4">
                <div class="w-24 h-32 bg-white/20 rounded-lg overflow-hidden">
                    <img id="card-photo" src="" alt="" class="w-full h-full object-cover">
                </div>
                <div class="flex-1">
                    <div class="space-y-2 text-sm">
                        <div>
                            <span class="text-white/70">Nama:</span>
                            <p id="card-name" class="font-semibold"></p>
                        </div>
                        <div>
                            <span class="text-white/70">Jabatan:</span>
                            <p id="card-position" class="font-semibold"></p>
                        </div>
                        <div>
                            <span class="text-white/70">Bio:</span>
                            <p id="card-bio" class="text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-gradient-to-r from-black/70 to-gray-900/70 text-white py-8 px-4 mt-12">
            <div class="max-w-6xl mx-auto text-center">
                <p class="font-bold text-yellow-300 text-lg">Â© 2025 SD Negeri 2 Purbasari. Semua hak dilindungi. âœ¨</p>
                <p class="text-blue-200 text-sm mt-2 font-semibold">ğŸ“ Jl. Desa Purbasari Sirandu, Kecamatan Karangjambu Kab Purbalingga</p>
            </div>
        </footer>
    </div>

    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://gjwjumhkeyhaynuqrbkd.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdqd2p1bWhrZXloYXludXFyYmtkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3MjE2OTMsImV4cCI6MjA3MDI5NzY5M30.u8PQ8iwuMbD_Vqyw9zqr3Ei4Bdf8p9bcNvqvNj6Rdyg';
        
        // Initialize Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Connection status
        let isConnected = false;

        // Test Supabase connection
        async function testConnection() {
            try {
                const { data, error } = await supabase
                    .from('principal')
                    .select('id')
                    .limit(1);
                
                if (error) {
                    console.error('Connection test error:', error);
                    throw error;
                }
                
                isConnected = true;
                updateConnectionStatus('âœ… Terhubung ke database', 'bg-gradient-to-r from-green-400 to-emerald-500 text-white');
                console.log('Supabase connected successfully');
                
                // Load initial data
                loadAllData();
            } catch (error) {
                isConnected = false;
                updateConnectionStatus('âŒ Gagal terhubung ke database', 'bg-gradient-to-r from-red-400 to-pink-500 text-white');
                console.error('Supabase connection failed:', error);
            }
        }

        function updateConnectionStatus(text, className) {
            const statusElement = document.getElementById('status-text');
            const statusContainer = document.getElementById('connection-status');
            statusElement.textContent = text;
            statusContainer.className = `text-sm rounded-full px-4 py-2 inline-block shadow-lg font-bold ${className}`;
        }

        // Load all data
        async function loadAllData() {
            await loadKepalaSekolah();
            await loadGuru();
            await loadPostingan();
            await loadTugas();
            await loadEkstrakurikuler();
        }

        // Show section function
        function showSection(sectionName) {
            document.getElementById('menu-grid').style.display = 'none';
            
            const sections = ['welcome', 'profil', 'visi-misi', 'guru', 'postingan', 'tugas', 'ekstrakurikuler', 'pendaftaran', 'gallery', 'kontak'];
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });

            document.getElementById(sectionName).classList.remove('hidden');
            document.getElementById('content-area').scrollIntoView({ behavior: 'smooth' });
        }

        // Show home function
        function showHome() {
            document.getElementById('menu-grid').style.display = 'grid';
            
            const sections = ['profil', 'visi-misi', 'guru', 'postingan', 'tugas', 'ekstrakurikuler', 'pendaftaran', 'gallery', 'kontak'];
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });

            document.getElementById('welcome').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Load Kepala Sekolah
        async function loadKepalaSekolah() {
            try {
                const { data, error } = await supabase
                    .from('principal')
                    .select('*')
                    .single();

                const kepalaContent = document.getElementById('kepala-sekolah-content');
                
                if (data) {
                    kepalaContent.innerHTML = `
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-8 text-white mb-8 border-4 border-yellow-300">
                            <div class="flex items-center gap-6">
                                <div class="w-32 h-32 rounded-full overflow-hidden bg-gradient-to-br from-white/20 to-yellow-200/20 backdrop-blur-sm border-4 border-yellow-300">
                                    ${data.photo_url ? 
                                        `<img src="${data.photo_url}" alt="${data.name}" class="w-full h-full object-cover">` :
                                        `<div class="w-full h-full flex items-center justify-center text-5xl">ğŸ‘©â€ğŸ«</div>`
                                    }
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-4xl font-bold mb-2 gradient-text-3">ğŸ‘‘ ${data.name}</h3>
                                    <p class="text-yellow-200 text-xl font-bold">ğŸ« Kepala Sekolah SD Negeri 2 Purbasari</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-8">
                            <div class="card-hover bg-gradient-to-br from-white to-blue-50 p-6 rounded-xl shadow-lg border-4 border-blue-300">
                                <h4 class="text-2xl font-bold text-blue-800 mb-4 flex items-center gap-2">
                                    <svg class="w-6 h-6 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                                    </svg>
                                    ğŸ‘¤ Biodata
                                </h4>
                                <p class="text-gray-700 leading-relaxed font-medium">${data.biodata || 'Biodata akan segera diperbarui.'}</p>
                            </div>
                            
                            <div class="card-hover bg-gradient-to-br from-white to-purple-50 p-6 rounded-xl shadow-lg border-4 border-purple-300">
                                <h4 class="text-2xl font-bold text-purple-800 mb-4 flex items-center gap-2">
                                    <svg class="w-6 h-6 text-purple-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z"/>
                                    </svg>
                                    ğŸ’¬ Pesan Kepala Sekolah
                                </h4>
                                <p class="text-gray-700 leading-relaxed font-medium">${data.message || 'Pesan akan segera diperbarui.'}</p>
                            </div>
                        </div>
                    `;
                } else {
                    kepalaContent.innerHTML = `
                        <div class="text-center py-12">
                            <svg class="w-16 h-16 text-yellow-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p class="text-yellow-300 font-bold text-lg">ğŸ“‹ Data kepala sekolah belum tersedia</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading kepala sekolah:', error);
            }
        }

        // Store teacher data globally
        let teacherData = [];

        // Load Guru with photo-only display
        async function loadGuru() {
            try {
                const { data, error } = await supabase
                    .from('teachers')
                    .select('*')
                    .order('name');

                console.log('Teacher data loaded:', data); // Debug log
                teacherData = data || []; // Store globally
                const guruPhotos = document.getElementById('guru-photos');
                
                if (data && data.length > 0) {
                    guruPhotos.innerHTML = data.map((guru, index) => {
                        return `
                            <div class="teacher-item">
                                <div class="teacher-photo" onclick="showTeacherCardById(${index})">
                                    ${guru.photo_url ? 
                                        `<img src="${guru.photo_url}" alt="${guru.name}" class="w-full h-full object-cover">` :
                                        `<div class="w-full h-full flex items-center justify-center text-3xl bg-gray-200">ğŸ‘¨â€ğŸ«</div>`
                                    }
                                </div>
                                <div class="teacher-name">${guru.name}</div>
                            </div>
                        `;
                    }).join('');
                } else {
                    guruPhotos.innerHTML = `
                        <div class="text-center py-12 col-span-full">
                            <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p class="text-gray-500">Data guru dan karyawan belum tersedia</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading guru:', error);
            }
        }

        // Show teacher card by index
        function showTeacherCardById(index) {
            if (teacherData && teacherData[index]) {
                const guru = teacherData[index];
                console.log('Showing teacher card for:', guru);
                
                const name = guru.name || 'Nama Guru';
                const position = guru.position || 'Guru';
                const bio = guru.bio || 'Biodata akan segera diperbarui';
                const photoUrl = guru.photo_url || '';
                
                showTeacherCard(guru.id, name, position, bio, photoUrl);
            } else {
                console.error('Teacher data not found for index:', index);
            }
        }

        // Show teacher card (ID card style)
        function showTeacherCard(id, name, position, bio, photoUrl) {
            console.log('showTeacherCard called with:', { id, name, position, bio, photoUrl });
            
            // Clean up the parameters to handle quotes and special characters
            const cleanName = (name || 'Nama Guru').replace(/&#39;/g, "'").replace(/&quot;/g, '"');
            const cleanPosition = (position || 'Guru').replace(/&#39;/g, "'").replace(/&quot;/g, '"');
            const cleanBio = (bio || 'Biodata akan segera diperbarui').replace(/&#39;/g, "'").replace(/&quot;/g, '"');
            const cleanPhotoUrl = photoUrl || '';
            
            console.log('Cleaned data:', { cleanName, cleanPosition, cleanBio, cleanPhotoUrl });
            
            // Set the text content
            const nameElement = document.getElementById('card-name');
            const positionElement = document.getElementById('card-position');
            const bioElement = document.getElementById('card-bio');
            
            if (nameElement) nameElement.textContent = cleanName;
            if (positionElement) positionElement.textContent = cleanPosition;
            if (bioElement) bioElement.textContent = cleanBio;
            
            // Handle photo
            const cardPhoto = document.getElementById('card-photo');
            const photoContainer = cardPhoto ? cardPhoto.parentElement : null;
            
            if (photoContainer) {
                if (cleanPhotoUrl && cleanPhotoUrl !== '' && cleanPhotoUrl !== 'null' && cleanPhotoUrl !== 'undefined') {
                    photoContainer.innerHTML = `<img id="card-photo" src="${cleanPhotoUrl}" alt="${cleanName}" class="w-full h-full object-cover">`;
                } else {
                    photoContainer.innerHTML = `
                        <div class="w-full h-full flex items-center justify-center text-4xl bg-white/30 rounded-lg">
                            ğŸ‘¨â€ğŸ«
                        </div>
                    `;
                }
            }
            
            // Show the modal
            const overlay = document.getElementById('teacher-overlay');
            const card = document.getElementById('teacher-card');
            
            if (overlay) overlay.classList.add('show');
            if (card) card.classList.add('show');
            
            console.log('Teacher card should now be visible');
        }

        // Close teacher card
        function closeTeacherCard() {
            document.getElementById('teacher-overlay').classList.remove('show');
            document.getElementById('teacher-card').classList.remove('show');
        }

        // Load Postingan
        async function loadPostingan() {
            try {
                console.log('Loading posts from database...');
                
                // First, let's check what tables exist and their structure
                const { data, error } = await supabase
                    .from('posts')
                    .select('*')
                    .order('created_at', { ascending: false });

                console.log('Posts query result:', { data, error });
                
                if (error) {
                    console.error('Database error:', error);
                    // Try alternative field names
                    const { data: altData, error: altError } = await supabase
                        .from('posts')
                        .select('*')
                        .order('date', { ascending: false });
                    
                    console.log('Alternative query result:', { altData, altError });
                    
                    if (altError) {
                        throw new Error(`Database query failed: ${altError.message}`);
                    }
                    
                    // Use alternative data if successful
                    data = altData;
                }

                const postinganList = document.getElementById('postingan-list');
                
                if (data && data.length > 0) {
                    console.log('Found posts:', data.length);
                    
                    // Load comments for each post (with error handling)
                    const postsWithComments = await Promise.all(data.map(async (post) => {
                        try {
                            const { data: comments } = await supabase
                                .from('comments')
                                .select('*')
                                .eq('post_id', post.id)
                                .order('created_at', { ascending: true });
                            
                            return { ...post, comments: comments || [] };
                        } catch (commentError) {
                            console.warn('Error loading comments for post', post.id, commentError);
                            return { ...post, comments: [] };
                        }
                    }));

                    postinganList.innerHTML = postsWithComments.map(post => {
                        // Handle different possible field names
                        const title = post.title || post.judul || 'Postingan Sekolah';
                        const content = post.content || post.konten || post.isi || 'Konten tidak tersedia';
                        const imageUrl = post.image_url || post.gambar_url || post.foto_url || '';
                        const postDate = post.created_at || post.date || post.tanggal || new Date().toISOString();
                        const likes = post.likes || post.suka || 0;
                        
                        console.log('Rendering post:', { title, content, imageUrl, postDate });
                        
                        return `
                            <div class="card-hover bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-lg overflow-hidden border-4 border-blue-300">
                                <!-- Post Header -->
                                <div class="p-6 pb-4">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="font-bold text-blue-800 text-2xl">ğŸ“° ${title}</h3>
                                        <span class="text-purple-600 text-sm flex items-center gap-1 font-semibold">
                                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                                            </svg>
                                            ğŸ“… ${new Date(postDate).toLocaleDateString('id-ID')}
                                        </span>
                                    </div>
                                    <p class="text-gray-700 mb-4 leading-relaxed font-medium text-lg">${content}</p>
                                </div>

                                <!-- Post Photo -->
                                ${imageUrl && imageUrl.trim() !== '' ? `
                                    <div class="px-6 pb-4">
                                        <div class="rounded-lg overflow-hidden bg-gradient-to-br from-gray-100 to-blue-100 border-4 border-purple-300">
                                            <img src="${imageUrl}" alt="${title}" class="w-full h-64 object-cover hover:scale-105 transition-transform duration-300 cursor-pointer" onclick="openImageModal('${imageUrl}', '${title}')" onerror="console.log('Image failed to load:', this.src); this.parentElement.innerHTML='<div class=\\'w-full h-64 bg-gradient-to-br from-red-200 to-pink-200 flex items-center justify-center text-red-600 font-bold\\'>ğŸ–¼ï¸ Gambar tidak dapat dimuat<br><small>URL: ${imageUrl}</small></div>'">
                                        </div>
                                    </div>
                                ` : ''}

                                <!-- Post Actions -->
                                <div class="px-6 py-4 border-t-4 border-purple-200 bg-gradient-to-r from-purple-50 to-pink-50">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-4">
                                            <button onclick="likePost(${post.id})" class="flex items-center gap-2 text-red-500 hover:text-red-600 transition-colors group font-bold">
                                                <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"/>
                                                </svg>
                                                <span id="likes-${post.id}" class="font-bold">â¤ï¸ ${likes}</span>
                                            </button>
                                            <button onclick="toggleComments(${post.id})" class="flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors font-bold">
                                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z"/>
                                                </svg>
                                                <span class="font-bold">ğŸ’¬ ${post.comments.length}</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Comments Section -->
                                <div id="comments-${post.id}" class="hidden border-t-4 border-yellow-300">
                                    <!-- Existing Comments -->
                                    <div class="px-6 py-4 max-h-64 overflow-y-auto bg-gradient-to-br from-yellow-50 to-orange-50">
                                        ${post.comments.length > 0 ? 
                                            post.comments.map(comment => `
                                                <div class="flex gap-3 mb-4">
                                                    <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                                                        ${(comment.author_name || 'A').charAt(0).toUpperCase()}
                                                    </div>
                                                    <div class="flex-1">
                                                        <div class="bg-gradient-to-br from-white to-blue-50 rounded-lg p-3 border-2 border-blue-200">
                                                            <p class="font-bold text-blue-800 text-sm">ğŸ‘¤ ${comment.author_name || 'Anonim'}</p>
                                                            <p class="text-gray-700 text-sm mt-1 font-medium">${comment.content || comment.isi || ''}</p>
                                                        </div>
                                                        <p class="text-xs text-purple-600 mt-1 ml-3 font-semibold">
                                                            â° ${new Date(comment.created_at || new Date()).toLocaleDateString('id-ID', { 
                                                                day: 'numeric', 
                                                                month: 'short', 
                                                                hour: '2-digit', 
                                                                minute: '2-digit' 
                                                            })}
                                                        </p>
                                                    </div>
                                                </div>
                                            `).join('') 
                                            : '<p class="text-gray-600 text-center py-4 font-semibold">ğŸ’­ Belum ada komentar</p>'
                                        }
                                    </div>

                                    <!-- Add Comment Form -->
                                    <div class="px-6 py-4 border-t-2 border-orange-200 bg-gradient-to-r from-orange-50 to-yellow-50">
                                        <form onsubmit="addComment(event, ${post.id})" class="flex gap-3">
                                            <input type="text" name="author_name" placeholder="ğŸ‘¤ Nama Anda" required class="flex-1 px-3 py-2 border-2 border-orange-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 font-semibold">
                                            <input type="text" name="comment_content" placeholder="ğŸ’¬ Tulis komentar..." required class="flex-2 px-3 py-2 border-2 border-orange-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 font-semibold">
                                            <button type="submit" class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors">
                                                ğŸš€ Kirim
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                } else {
                    console.log('No posts found in database');
                    postinganList.innerHTML = `
                        <div class="text-center py-12">
                            <svg class="w-16 h-16 text-yellow-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p class="text-yellow-300 font-bold text-lg mb-2">ğŸ“° Belum ada postingan di database</p>
                            <p class="text-orange-300 font-semibold text-sm">ğŸ” Periksa tabel 'posts' di Supabase</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading postingan:', error);
                const postinganList = document.getElementById('postingan-list');
                postinganList.innerHTML = `
                    <div class="text-center py-12">
                        <svg class="w-16 h-16 text-red-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/>
                        </svg>
                        <p class="text-red-400 font-bold text-lg mb-2">âŒ Gagal memuat postingan</p>
                        <p class="text-orange-300 font-semibold text-sm">Error: ${error.message}</p>
                        <button onclick="loadPostingan()" class="mt-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg text-sm font-bold">
                            ğŸ”„ Coba Lagi
                        </button>
                    </div>
                `;
            }
        }

        // Like post function
        async function likePost(postId) {
            try {
                const { data, error } = await supabase
                    .from('posts')
                    .select('likes')
                    .eq('id', postId)
                    .single();

                if (data) {
                    const newLikes = data.likes + 1;
                    
                    const { error: updateError } = await supabase
                        .from('posts')
                        .update({ likes: newLikes })
                        .eq('id', postId);

                    if (!updateError) {
                        document.getElementById(`likes-${postId}`).textContent = `â¤ï¸ ${newLikes}`;
                    }
                }
            } catch (error) {
                console.error('Error liking post:', error);
            }
        }

        // Load Tugas
        async function loadTugas() {
            try {
                const { data, error } = await supabase
                    .from('tugas')
                    .select('*')
                    .order('created_at', { ascending: false });

                window.allTugas = data || [];
                displayTugas(window.allTugas);
            } catch (error) {
                console.error('Error loading tugas:', error);
            }
        }

        // Display tugas
        function displayTugas(tugasData) {
            const tugasList = document.getElementById('tugas-list');
            
            if (tugasData && tugasData.length > 0) {
                const mapelColors = {
                    'Matematika': 'bg-gradient-to-br from-blue-100 to-blue-200 border-blue-400 text-blue-800',
                    'Bahasa Indonesia': 'bg-gradient-to-br from-green-100 to-green-200 border-green-400 text-green-800',
                    'IPA': 'bg-gradient-to-br from-purple-100 to-purple-200 border-purple-400 text-purple-800',
                    'IPS': 'bg-gradient-to-br from-orange-100 to-orange-200 border-orange-400 text-orange-800',
                    'PPKn': 'bg-gradient-to-br from-red-100 to-red-200 border-red-400 text-red-800',
                    'Bahasa Inggris': 'bg-gradient-to-br from-indigo-100 to-indigo-200 border-indigo-400 text-indigo-800',
                    'Seni Budaya': 'bg-gradient-to-br from-pink-100 to-pink-200 border-pink-400 text-pink-800',
                    'PJOK': 'bg-gradient-to-br from-yellow-100 to-yellow-200 border-yellow-400 text-yellow-800'
                };

                tugasList.innerHTML = tugasData.map(tugas => {
                    const colorClass = mapelColors[tugas.mapel] || 'bg-gradient-to-br from-gray-100 to-gray-200 border-gray-400 text-gray-800';
                    
                    return `
                        <div class="card-hover bg-gradient-to-br from-white to-orange-50 rounded-xl p-6 shadow-lg border-l-8 border-orange-500" data-kelas="${tugas.kelas}">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <span class="px-4 py-2 bg-gradient-to-r from-orange-400 to-red-500 text-white rounded-full text-sm font-bold">
                                        ğŸ“ Kelas ${tugas.kelas}
                                    </span>
                                    <span class="px-4 py-2 ${colorClass} rounded-full text-sm font-bold border-2">
                                        ğŸ“š ${tugas.mapel}
                                    </span>
                                </div>
                                <span class="text-purple-600 text-sm font-bold">
                                    ğŸ“… ${new Date(tugas.created_at).toLocaleDateString('id-ID')}
                                </span>
                            </div>
                            <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-4 rounded-lg border-4 border-yellow-300">
                                <h4 class="font-bold text-orange-800 mb-3 text-xl">ğŸ“ Daftar Tugas:</h4>
                                <div class="text-gray-800 whitespace-pre-line font-medium text-lg">
                                    ${tugas.daftar_tugas}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                tugasList.innerHTML = `
                    <div class="text-center py-12">
                        <svg class="w-16 h-16 text-yellow-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <p class="text-yellow-300 font-bold text-lg">ğŸ“ Belum ada tugas untuk filter ini</p>
                    </div>
                `;
            }
        }

        // Filter tugas by class
        function filterTugas(kelas) {
            // Update button states
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.className = 'filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-gray-300 font-semibold';
            });
            event.target.className = 'filter-btn bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg text-sm transition-colors font-bold';

            // Filter and display tugas
            if (kelas === 'all') {
                displayTugas(window.allTugas);
            } else {
                const filteredTugas = window.allTugas.filter(tugas => tugas.kelas === kelas);
                displayTugas(filteredTugas);
            }
        }

        // Load Ekstrakurikuler
        async function loadEkstrakurikuler() {
            try {
                // Load ekstrakurikuler data
                const { data: ekstraData, error: ekstraError } = await supabase
                    .from('ekstrakurikuler')
                    .select('*')
                    .order('nama');

                if (ekstraError) throw ekstraError;

                const ekstraList = document.getElementById('ekstrakurikuler-list');
                
                if (ekstraData && ekstraData.length > 0) {
                    const ekstraIcons = {
                        'Pramuka': { icon: 'ğŸ•ï¸', color: 'from-yellow-400 to-orange-500', border: 'border-yellow-300' },
                        'Futsal': { icon: 'âš½', color: 'from-green-400 to-blue-500', border: 'border-green-300' },
                        'Seni Tari': { icon: 'ğŸ’ƒ', color: 'from-pink-400 to-purple-500', border: 'border-pink-300' },
                        'Drum Band': { icon: 'ğŸ¥', color: 'from-red-400 to-pink-500', border: 'border-red-300' },
                        'Basket': { icon: 'ğŸ€', color: 'from-orange-400 to-red-500', border: 'border-orange-300' },
                        'Voli': { icon: 'ğŸ', color: 'from-blue-400 to-indigo-500', border: 'border-blue-300' },
                        'Karate': { icon: 'ğŸ¥‹', color: 'from-gray-400 to-gray-600', border: 'border-gray-300' },
                        'Melukis': { icon: 'ğŸ¨', color: 'from-purple-400 to-pink-500', border: 'border-purple-300' }
                    };

                    ekstraList.innerHTML = ekstraData.map(ekstra => {
                        const iconData = ekstraIcons[ekstra.nama] || { icon: 'â­', color: 'from-gray-400 to-gray-600', border: 'border-gray-300' };
                        
                        return `
                            <div class="card-hover bg-gradient-to-br ${iconData.color} rounded-xl p-6 text-white shadow-lg border-4 ${iconData.border}">
                                <div class="text-center mb-4">
                                    <div class="text-6xl mb-4">${iconData.icon}</div>
                                    <h4 class="text-2xl font-bold mb-3 text-yellow-100 drop-shadow-lg">${ekstra.nama}</h4>
                                    <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4 border-2 border-white/30 mb-4">
                                        <p class="text-sm font-bold text-yellow-200 mb-2">ğŸ‘¨â€ğŸ« Pembina:</p>
                                        <p class="text-lg font-bold text-white drop-shadow">${ekstra.pembina}</p>
                                    </div>
                                </div>
                                
                                <div class="bg-white/30 backdrop-blur-sm rounded-lg p-4 border-2 border-white/40">
                                    <h5 class="text-sm font-bold text-yellow-200 mb-3 text-center">ğŸ“… Jadwal Kegiatan:</h5>
                                    <div class="bg-white/20 rounded-lg p-3 border border-white/30">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm font-bold text-yellow-200">ğŸ“ Kelas ${ekstra.kelas}</span>
                                            <span class="text-sm font-bold text-white">${ekstra.jadwal}</span>
                                        </div>
                                        <div class="text-center">
                                            <span class="text-xs text-yellow-100 font-semibold">â° Waktu kegiatan ekstrakurikuler</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                } else {
                    ekstraList.innerHTML = `
                        <div class="text-center py-12 col-span-full">
                            <svg class="w-16 h-16 text-yellow-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p class="text-yellow-300 font-bold text-lg">â­ Data ekstrakurikuler belum tersedia</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading ekstrakurikuler:', error);
                const ekstraList = document.getElementById('ekstrakurikuler-list');
                ekstraList.innerHTML = `
                    <div class="text-center py-12 col-span-full">
                        <svg class="w-16 h-16 text-red-400 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/>
                        </svg>
                        <p class="text-red-400 font-bold text-lg mb-2">âŒ Gagal memuat ekstrakurikuler</p>
                        <p class="text-orange-300 font-semibold text-sm">Error: ${error.message}</p>
                    </div>
                `;
            }
        }

        // Handle pendaftaran form
        document.getElementById('pendaftaran-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                nama: document.getElementById('nama').value,
                tempat_lahir: document.getElementById('tempat-lahir').value,
                tanggal_lahir: document.getElementById('tanggal-lahir').value,
                jenis_kelamin: document.getElementById('jenis-kelamin').value,
                orang_tua: document.getElementById('orang-tua').value,
                telepon: document.getElementById('telepon').value,
                alamat: document.getElementById('alamat').value
            };

            try {
                const { data, error } = await supabase
                    .from('pendaftaran')
                    .insert([formData]);

                if (error) throw error;

                alert('ğŸ‰ Pendaftaran berhasil! Terima kasih telah mendaftar di SD Negeri 2 Purbasari. âœ¨');
                document.getElementById('pendaftaran-form').reset();
            } catch (error) {
                console.error('Error submitting pendaftaran:', error);
                alert('âŒ Terjadi kesalahan saat mengirim pendaftaran. Silakan coba lagi.');
            }
        });

        // Toggle comments visibility
        function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            commentsSection.classList.toggle('hidden');
        }

        // Add comment function
        async function addComment(event, postId) {
            event.preventDefault();
            
            const form = event.target;
            const authorName = form.author_name.value.trim();
            const content = form.comment_content.value.trim();
            
            if (!authorName || !content) return;
            
            try {
                const { data, error } = await supabase
                    .from('comments')
                    .insert([{
                        post_id: postId,
                        author_name: authorName,
                        content: content,
                        created_at: new Date().toISOString()
                    }]);

                if (error) throw error;

                // Reload postingan to show new comment
                await loadPostingan();
                
                // Keep comments section open
                setTimeout(() => {
                    const commentsSection = document.getElementById(`comments-${postId}`);
                    if (commentsSection) {
                        commentsSection.classList.remove('hidden');
                    }
                }, 100);

            } catch (error) {
                console.error('Error adding comment:', error);
                alert('âŒ Gagal menambahkan komentar. Silakan coba lagi.');
            }
        }

        // Open image modal
        function openImageModal(imageUrl, title) {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.onclick = function(e) {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };

            // Create modal content
            modal.innerHTML = `
                <div class="relative max-w-4xl max-h-full">
                    <button onclick="document.body.removeChild(this.closest('.fixed'))" class="absolute -top-10 right-0 text-white hover:text-gray-300 text-2xl font-bold z-10">
                        âŒ
                    </button>
                    <img src="${imageUrl}" alt="${title}" class="max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl border-4 border-yellow-300">
                    <div class="text-center mt-4">
                        <p class="text-white text-lg font-bold">ğŸ–¼ï¸ ${title}</p>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            testConnection();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'973274f61192e77a',t:'MTc1NTg2NjYxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
